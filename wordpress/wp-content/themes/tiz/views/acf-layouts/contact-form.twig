{# Layout: Contact – Formulaire #}
{% set heading = section.heading %}
{% set description = section.description %}
{% set form_id = section.contact_form|default(null) %}
{% set title_is_h1 = section.title_is_h1|default(false) %}
{% set bg = section.background_color|default('') %}
{% set is_class = bg starts with 'bg-' %}
{% set bg_style = (bg and not is_class) ? 'background-color: ' ~ bg : '' %}

{# Fields for 'cards' layout #}
{% set card_appt_bg = section.card_appointment_bg_color|default('#0a84eb') %}
{% set card_appt_icon = section.card_appointment_icon %}
{% set card_appt_title = section.card_appointment_title %}
{% set card_appt_text = section.card_appointment_text %}
{% set card_appt_cta = section.card_appointment_cta %}
{% set card_appt_cta_id = section.card_appointment_cta_id %}

{% set card_loc_bg = section.card_location_bg_color|default('#ffffff') %}
{% set card_loc_title = section.card_location_title %}
{% set card_loc_text = section.card_location_text %}
{% set card_loc_phone = section.card_location_phone %}
{% set card_loc_address = section.card_location_address %}
{% set card_loc_map_link = section.card_location_map_link %}

<section class="acf-contact-form py-12 md:py-20 px-6 lg:px-2 {{ is_class ? bg : '' }} {% if title_is_h1 %} mt-16 md:mt-20{% endif %}" {% if bg_style %} style="{{ bg_style }}" {% endif %}>
	<div
		class="container mx-auto">
		{# Optional Header above columns #}
		{% if heading %}
			<div class="mb-10 md:mb-16 text-center">
				{% if title_is_h1 %}
					<h1 class="scroll-animate text-4xl md:text-5xl text-bay-of-many-900 mb-6 [&>span]:text-dodger-blue-600 [&>span]:font-semibold">{{ heading|raw }}</h1>
				{% else %}
					<h2 class="scroll-animate text-4xl md:text-5xl text-bay-of-many-900 mb-6 [&>span]:text-dodger-blue-600 [&>span]:font-semibold">{{ heading|raw }}</h2>
				{% endif %}
				{% if description %}
					<p class="scroll-animate text-xl text-wild-blue-yonder-600 max-w-3xl mx-auto">{{ description }}</p>
				{% endif %}
			</div>
		{% endif %}

		<div
			class="grid grid-cols-1 lg:grid-cols-2 gap-10 items-start">
			{# Left Column: Form #}
			<div class="bg-white/60 rounded-tiz p-6 md:p-8 shadow-inner">
				{% if form_id %}
					{{ function('do_shortcode', '[contact-form-7 id="' ~ form_id ~ '"]') }}
				{% else %}
					<p class="text-wild-blue-yonder-600">Aucun formulaire sélectionné.</p>
				{% endif %}
			</div>

			{# Right Column: Cards #}
			<div
				class="space-y-6">
				{# Card 1: Appointment #}
				<div class="rounded-tiz p-8 text-white" style="background-color: {{ card_appt_bg }};">
					<div class="flex items-start flex-col">
						<div class="w-full flex mb-3">
							{% if card_appt_icon %}
								{% include 'partials/components/acf-image.twig' with { image: card_appt_icon, class: 'w-10 h-10 translate-y-1 m-auto ml-0 mr-2 object-contain' } %}
                            {% endif %}
                            <h3 class="text-4xl font-normal [&>span]:font-semibold text-white">{{ card_appt_title|raw }}</h3>
                        </div>
                        <div class="scroll-animate">
							<div class="mb-6">{{ card_appt_text|nl2br }}</div>
							{% if card_appt_cta %}
								{% include 'partials/components/button.twig' with { 
                                button: {
                                    label: card_appt_cta.title,
                                    link: card_appt_cta.url,
                                    target: '_blank'
                                },
                                id: card_appt_cta_id,
                                variant: 'secondary', 
                                context: 'full_background' 
                            } %}
							{% endif %}
						</div>
					</div>
				</div>

				{# Card 2: Location #}
				<div class="rounded-tiz p-8 text-bay-of-many-900" style="background-color: {{ card_loc_bg }};">
					<h3 class="scroll-animate text-bay-of-many-900 text-4xl font-normal [&>span]:font-semibold mb-4">{{ card_loc_title }}</h3>
					<div class="scroll-animate mb-6 opacity-80 text-bay-of-many-900">{{ card_loc_text|nl2br }}</div>

					<div class="space-y-4">
						<p class="scroll-animate font-bold uppercase tracking-wide text-dodger-blue-600 mb-3">AGENCE TIZ</p>

						{% if card_loc_phone %}
							<div class="scroll-animate flex items-center gap-3 mb-3">
								<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-purple-500">
									<path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"/>
								</svg>
								<a href="tel:{{ card_loc_phone|replace({' ':''}) }}" class="hover:opacity-80 transition-opacity underline decoration-1 underline-offset-4">{{ card_loc_phone }}</a>
							</div>
						{% endif %}

						{% if card_loc_address %}
							<div class="scroll-animate flex items-start gap-3 mb-3">
								<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke-width="1.5" stroke="#f3c53c" class="w-5 h-5 text-green-500 mt-1">
									<path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"/>
									<path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"/>
								</svg>
								<span>{{ card_loc_address|nl2br }}</span>
							</div>
						{% endif %}

						{% if card_loc_map_link %}
							<div class="scroll-animate pt-4">
								<a href="{{ card_loc_map_link.url }}" target="{{ card_loc_map_link.target|default('_blank') }}" class="font-bold uppercase text-sm hover:opacity-80 transition-opacity">
									{{ card_loc_map_link.title|default('VOIR SUR LA CARTE') }}
								</a>
							</div>
						{% endif %}
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
